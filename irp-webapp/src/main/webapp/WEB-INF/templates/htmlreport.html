<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head lang="en">
    <meta charset="UTF-8">
    <title>Implementation Readiness Package Report</title>
    <style>
        .tableAnalysis {
            margin: 0;
            padding: 0;
            width: 100%;
            border: 1px solid #000000;
            border-spacing: 0;
        }

        .tableAnalysis table {
            border-collapse: collapse;
            border-spacing: 0;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .tableAnalysis th {
            border-width: 0 1px 1px 0;
            border-style: solid;
            border-color: #000000;
        }

        .tableAnalysis tr:last-child td:last-child {
            border-bottom-right-radius: 0px;
        }

        .tableAnalysis table tr:first-child td:first-child {
            border-top-left-radius: 0px;
        }

        .tableAnalysis table tr:first-child td:last-child {
            border-top-right-radius: 0px;
        }

        .tableAnalysis tr:last-child td:first-child {
            border-bottom-left-radius: 0px;
        }

        .tableAnalysis tr:hover td {
        }

        /*.tableAnalysis .testPropertiesRows:not(.category):nth-of-type(odd) {*/
        /*background-color: #9391F9;*/
        /*}*/

        /*.tableAnalysis .examineeRows:not(.category):nth-of-type(odd) {*/
        /*background-color: #0000FF;*/
        /*}*/

        /*.tableAnalysis .examineeAttributeRows:not(.category):nth-of-type(odd) {*/
        /*background-color: #ff0000;*/
        /*}*/

        /*.tableAnalysis .examineeRelationshipRows:not(.category):nth-of-type(odd) {*/
        /*background-color: #FFF56B;*/
        /*}*/

        /*.tableAnalysis .opportunityPropertiesRows:not(.category):nth-of-type(odd) {*/
        /*background-color: #47FF6B;*/
        /*}*/

        /*.tableAnalysis .opportunitySegmentRows:not(.category):nth-of-type(odd) {*/
        /*background-color: #00ffff;*/
        /*}*/

        .tableAnalysis tr.even {
            background-color: #ddd;
        }

        /*.tableAnalysis tr:nth-of-type(even) {*/
        /*background-color: #ffffff;*/
        /*}*/

        .tableAnalysis td {
            vertical-align: middle;

            border-width: 0 1px 1px 0;
            border-style: solid;
            border-color: #000000;
            text-align: left;
            padding: 7px;
            font-size: 10px;
            font-family: Arial, Helvetica, Geneva, sans-serif;
            font-weight: normal;
            color: #000000;
        }

        .tableAnalysis tr:last-child td {
            border-width: 0 1px 0 0;
        }

        .tableAnalysis tr td:last-child {
            border-width: 0 0 1px 0;
        }

        .tableAnalysis tr:last-child td:last-child {
            border-width: 0 0 0 0;
        }

        .tableAnalysis thead {display: table-header-group;}

        .tableAnalysis thead th {
            background-color: #cccccc;
            text-align: center;
            border: 0 solid #000000;
            border-bottom-width: 1px;
            border-left-width: 1px;
            font-size: 14px;
            font-family: Arial, Helvetica, Geneva, sans-serif;
            font-weight: bold;
            color: #000000;
        }

        .tableAnalysis tr:first-child td:first-child {
            border-width: 0 0 1px 0;
        }

        .tableAnalysis tr:first-child td:last-child {
            border-width: 0 0 1px 1px;
        }

        .tableAnalysis .category td {
            text-align: center;
            font-size: large;
            font-family: Arial;
            color: #000;
        }

        p {
            font-family: serif;
            font-size: smaller;
        }

        tr.border_bottom td {
            border-bottom:1pt solid black;
        }
    </style>
</head>
<body>
    <table>
        <tr>
            <td>Implementation Readiness Package</td>
            <td th:text="${responses.irpVersion}"></td>
        </tr>
        <tr>
            <td>Vendor Name</td>
            <td th:text="${responses.vendorName}"></td>
        </tr>
        <tr>
            <td>Date and Time Analyzed</td>
            <td th:text="${responses.dateTimeAnalyzed}"></td>
        </tr>
        <tr class="border_bottom">
            <td colspan="2">
                <em>Explanation</em> Codes - Each field is analyzed according to its type.
                <ul>
                    <li><em>P</em> type: Field is not empty with correct data type and acceptable value.</li>
                    <li><em>PC</em> type: Same as P plus verified the value is correct</li>
                </ul>
            </td>
        </tr>
    </table>

    <th:block th:each="response : ${responses.individualResponses}">
        <table>
            <tr>
                <td>Filename</td>
                <td th:text="${response.fileName}"></td>
            </tr>
            <tr>
                <td>XML Valid</td>
                <td th:text="${response.validXMLfile}"></td>
            </tr>
        </table>
    <table class="tableAnalysis" style="repeat-header:yes;repeat-footer:yes;">
        <thead>
            <tr>
                <th>Field</th>
                <th>Expected Value</th>
                <th>Returned Value</th>
                <th width="10%">Status</th>
                <th width="20%">Explanation</th>
            </tr>
        </thead>
        <tbody>
            <tr class="category">
                <td colspan="5">Test Properties</td>
            </tr>

            <tr th:each="cell : ${response.testPropertiesCategory.cellCategories}" class="testPropertiesRows" th:classappend="${cellStat.even}? 'even'">
                <td>Test Properties: <span th:text=" ${cell.tdsFieldName}"></span></td>
                <td th:text="${cell.tdsExpectedValue}"></td>
                <td th:text="${cell.tdsFieldNameValue}"></td>
                <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
            </tr>

            <tr class="category">
                <td colspan="5">Examinee</td>
            </tr>

            <tr th:each="cell : ${response.examineeCategory.cellCategories}" class="examineeRows" th:classappend="${cellStat.even}? 'even'">
                <td>Examinee: <span th:text="${cell.tdsFieldName}"></span></td>
                <td th:text="${cell.tdsExpectedValue}"></td>
                <td th:text="${cell.tdsFieldNameValue}"></td>
                <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
            </tr>

            <th:block th:each="category : ${response.examineeAttributeCategories}" th:with="categoryIndex=${categoryStat}">
                <tr th:each="cell : ${category.cellCategories}" class="examineeAttributeRows" th:classappend="${categoryIndex.even}? 'even'">
                    <td>ExamineeAttribute: <span th:text="${cell.tdsFieldName}"></span></td>
                    <td th:text="${cell.tdsExpectedValue}"></td>
                    <td th:text="${cell.tdsFieldNameValue}"></td>
                    <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                    <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
                </tr>
            </th:block>

            <th:block th:each="category : ${response.examineeRelationshipCategories}" th:with="categoryIndex=${categoryStat}">
                <tr th:each="cell : ${category.cellCategories}" class="examineeAttributeRows" th:classappend="${categoryIndex.even}? 'even'">
                    <td>ExamineeRelationship: <span th:text="${cell.tdsFieldName}"></span></td>
                    <td th:text="${cell.tdsExpectedValue}"></td>
                    <td th:text="${cell.tdsFieldNameValue}"></td>
                    <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                    <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
                </tr>
            </th:block>

            <tr class="category">
                <td colspan="5">Opportunity</td>
            </tr>
            <tr th:each="cell : ${response.opportunityCategory.cellCategories}" class="opportunityPropertiesRows" th:classappend="${cellStat.even}? 'even'">
                <td>Opportunity Properties: <span th:text="${cell.tdsFieldName}"></span></td>
                <td th:text="${cell.tdsExpectedValue}"></td>
                <td th:text="${cell.tdsFieldNameValue}"></td>
                <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
            </tr>

            <tr class="category">
                <td colspan="5">Opportunity Segments</td>
            </tr>
            <th:block th:each="segment : ${response.opportunityCategory.segmentCategories}">
                <tr th:each="cell : ${segment.cellCategories}" class="opportunitySegmentRows" th:classappend="${cellStat.even}? 'even'">
                    <td>Opportunity Segment: <span th:text="${cell.tdsFieldName}"></span></td>
                    <td th:text="${cell.tdsExpectedValue}"></td>
                    <td th:text="${cell.tdsFieldNameValue}"></td>
                    <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                    <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
                </tr>
            </th:block>

            <tr class="category">
                <td colspan="5">Opportunity Accommodation</td>
            </tr>
            <th:block th:each="accommodation : ${response.opportunityCategory.accommodationCategories}">
                <tr th:each="cell : ${accommodation.cellCategories}" class="opportunityAccommodationRows" th:classappend="${cellStat.even}? 'even'">
                    <td>Opportunity Accommodation: <span th:text="${cell.tdsFieldName}"></span></td>
                    <td th:text="${cell.tdsExpectedValue}"></td>
                    <td th:text="${cell.tdsFieldNameValue}"></td>
                    <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                    <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
                </tr>
            </th:block>

            <tr class="category">
                <td colspan="5">Opportunity Scores</td>
            </tr>
            <th:block th:each="score : ${response.opportunityCategory.scoreCategories}">
                <tr th:each="cell : ${score.cellCategories}" class="opportunityScoreRows" th:classappend="${cellStat.even}? 'even'">
                    <td>Opportunity Score: <span th:text="${cell.tdsFieldName}"></span></td>
                    <td th:text="${cell.tdsExpectedValue}"></td>
                    <td th:text="${cell.tdsFieldNameValue}"></td>
                    <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                    <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
                </tr>
            </th:block>

            <tr class="category">
                <td colspan="5">Opportunity Items</td>
            </tr>
            <th:block th:each="item : ${response.opportunityCategory.itemCategories}">
                <tr class="opportunityItem even">
                    <td colspan="3" th:text="${item.itemBankKeyKey}"></td>
                    <td th:text="${helper.itemStatus(item)}"></td>
                    <td th:text="${helper.itemExplanation(item)}"></td>
                </tr>

                <th:block th:if="${helper.itemFound(item)}">

                    <tr th:each="cell : ${item.cellCategories}" class="opportunityItem">
                        <td>Opportunity Item: <span th:text="${cell.tdsFieldName}"></span></td>
                        <td th:text="${cell.tdsExpectedValue}"></td>
                        <td th:text="${cell.tdsFieldNameValue}"></td>
                        <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                        <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
                    </tr>

                    <th:block th:if="${item.responseCategory}" th:with="rc=${item.responseCategory}">
                        <tr th:each="cell : ${rc.cellCategories}" class="opportunityItem">
                            <td>Opportunity Item Response: <span th:text="${cell.tdsFieldName}"></span></td>
                            <td th:text="${cell.tdsExpectedValue}"></td>
                            <td th:text="${cell.tdsFieldNameValue}"></td>
                            <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                            <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
                        </tr>
                    </th:block>
                    <th:block th:if="${item.scoreInfoCategory}" th:with="si=${item.scoreInfoCategory}">
                        <tr th:each="cell : ${si.cellCategories}" class="opportunityItem">
                            <td>Opportunity Item ScoreInfo: <span th:text="${cell.tdsFieldName}"></span></td>
                            <td th:text="${cell.tdsExpectedValue}"></td>
                            <td th:text="${cell.tdsFieldNameValue}"></td>
                            <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                            <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
                        </tr>
                        <tr class="opportunityItem">
                            <td>Opportunity Item ScoreInfo ScoreRationale: message</td>
                            <td></td>
                            <td th:text="${si.scoreRationaleCategory.message}"></td>
                            <td th:text="${helper.status(si.scoreRationaleCategory.messageFieldCheckType)}"></td>
                            <td th:text="${helper.explanation(si.scoreRationaleCategory.messageFieldCheckType)}"></td>
                        </tr>
                    </th:block>

                </th:block>
            </th:block>

            <tr class="category">
                <td colspan="5">Comments</td>
            </tr>

            <th:block th:each="category : ${response.commentCategories}">
                <tr th:each="cell : ${category.cellCategories}" class="comment" th:classappend="${cellStat.even}? 'even'">
                    <td>Comment: <span th:text="${cell.tdsFieldName}"></span></td>
                    <td th:text="${cell.tdsExpectedValue}"></td>
                    <td th:text="${cell.tdsFieldNameValue}"></td>
                    <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                    <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
                </tr>
            </th:block>

            <tr class="category">
                <td colspan="5">Tool Usage</td>
            </tr>

            <th:block th:each="category : ${response.toolUsageCategories}">
                <tr th:each="cell : ${category.cellCategories}" class="toolUsage" th:classappend="${cellStat.even}? 'even'">
                    <td>ToolUsage: <span th:text="${cell.tdsFieldName}"></span></td>
                    <td th:text="${cell.tdsExpectedValue}"></td>
                    <td th:text="${cell.tdsFieldNameValue}"></td>
                    <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                    <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
                </tr>
                <th:block th:each="pageCategory : ${category.toolPageCategories}">
                    <tr th:each="cell : ${pageCategory.cellCategories}" class="toolPage" th:classappend="${cellStat.even}? 'even'">
                        <td>ToolPage: <span th:text="${cell.tdsFieldName}"></span></td>
                        <td th:text="${cell.tdsExpectedValue}"></td>
                        <td th:text="${cell.tdsFieldNameValue}"></td>
                        <td th:text="${helper.status(cell.fieldCheckType)}"></td>
                        <td th:text="${helper.explanation(cell.fieldCheckType)}"></td>
                    </tr>
                </th:block>
            </th:block>
        </tbody>
    </table>
        <div style="page-break-before:always">&nbsp;</div>
    </th:block>
</body>
</html>