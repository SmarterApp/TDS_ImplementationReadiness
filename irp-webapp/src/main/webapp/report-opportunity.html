<script src="js/irp.js"></script>
<polymer-element name="report-opportunity" attributes="response">
    <template>
        <link rel="stylesheet" href="css/report.css"/>

        <table class="tableAnalysis">
            <thead>
            <tr>
                <th>Field</th>
                <th>Expected Value</th>
                <th>Returned Value</th>
                <th>Status</th>
                <th>Explanation</th>
            </tr>
            </thead>
            <tbody>

            <tr class="category">
                <td colspan="5">Opportunity</td>
            </tr>

            <template bind="{{response.opportunityCategory as category}}">
                <template repeat="{{cell, index in category.cellCategories}}">
                    <tr class="opportunityPropertiesRows {{oddOrEvenClass(index)}}">
                        <td>Opportunity Properties: {{cell.tdsFieldName}}</td>
                        <td>{{cell.tdsExpectedValue}}</td>
                        <td>{{cell.tdsFieldNameValue}}</td>
                        <td>{{cell.fieldCheckType | status}}</td>
                        <td>{{cell.fieldCheckType | explanation}}</td>
                    </tr>
                </template>
                <tr class="category">
                    <td colspan="5">Opportunity Segments</td>
                </tr>
                <template repeat="{{segment in category.segmentCategories}}">
                    <template repeat="{{cell, index in segment.cellCategories}}">
                        <tr class="opportunitySegmentRows {{oddOrEvenClass(index)}}">
                            <td>Opportunity Segment: {{cell.tdsFieldName}}</td>
                            <td>{{cell.tdsExpectedValue}}</td>
                            <td>{{cell.tdsFieldNameValue}}</td>
                            <td>{{cell.fieldCheckType | status}}</td>
                            <td>{{cell.fieldCheckType | explanation}}</td>
                        </tr>
                    </template>
                </template>
                <tr class="category">
                    <td colspan="5">Opportunity Accommodation</td>
                </tr>
                <template repeat="{{accommodation in category.accommodationCategories}}">
                    <template repeat="{{cell, index in accommodation.cellCategories}}">
                        <tr class="opportunityAccommodation {{oddOrEvenClass(index)}}">
                            <td>Opportunity Accommodation: {{cell.tdsFieldName}}</td>
                            <td>{{cell.tdsExpectedValue}}</td>
                            <td>{{cell.tdsFieldNameValue}}</td>
                            <td>{{cell.fieldCheckType | status}}</td>
                            <td>{{cell.fieldCheckType | explanation}}</td>
                        </tr>
                    </template>
                </template>
                <tr class="category">
                    <td colspan="5">Opportunity Scores</td>
                </tr>
                <tr>
                    <td colspan="5" style="font-weight:bold;font-size:medium;text-align:center;">Click the Test Scoring tab above for detailed Test Scoring analysis</td>
                </tr>
                <!--<template repeat="{{score in category.scoreCategories}}">-->
                    <!--<template repeat="{{cell, index in score.cellCategories}}">-->
                        <!--<tr class="opportunityScore {{oddOrEvenClass(index)}}">-->
                            <!--<td>Opportunity Score: {{cell.tdsFieldName}}</td>-->
                            <!--<td>{{cell.tdsExpectedValue}}</td>-->
                            <!--<td>{{cell.tdsFieldNameValue}}</td>-->
                            <!--<td>{{cell.fieldCheckType | status}}</td>-->
                            <!--<td>{{cell.fieldCheckType | explanation}}</td>-->
                        <!--</tr>-->
                    <!--</template>-->
                <!--</template>-->
                <tr class="category">
                    <td colspan="5">Opportunity Items</td>
                </tr>
                <template repeat="{{item, index in category.itemCategories}}">
                    <tr class="opportunityItem even">
                        <td colspan="3">{{item.itemBankKeyKey}}</td>
                        <td>{{item | itemStatus}}</td>
                        <td>{{item | itemExplanation}}</td>
                    </tr>
                    <template if="{{item | itemFound}}">
                        <template repeat="{{cell in item.cellCategories}}">
                            <tr class="opportunityItem">
                                <td>Opportunity Item: {{cell.tdsFieldName}}</td>
                                <td>{{cell.tdsExpectedValue}}</td>
                                <td>{{cell.tdsFieldNameValue}}</td>
                                <td>{{cell.fieldCheckType | status}}</td>
                                <td>{{cell.fieldCheckType | explanation}}</td>
                            </tr>
                        </template>
                        <template if="{{item.responseCategory}}">
                              <template bind="{{item.responseCategory as rc}}">
                                <template repeat="{{cell in rc.cellCategories}}">
                                    <tr class="opportunityItem">
                                        <td>Opportunity Item Response: {{cell.tdsFieldName}}</td>
                                        <td>{{cell.tdsExpectedValue}}</td>
                                        <td>{{cell.tdsFieldNameValue}}</td>
                                        <td>{{cell.fieldCheckType | status}}</td>
                                        <td>{{cell.fieldCheckType | explanation}}</td>
                                    </tr>
                                </template>
                            </template>
                        </template>
                        <template if="{{item.scoreInfoCategory}}">
                            <template bind="{{item.scoreInfoCategory as si}}">
                                <template repeat="{{cell in si.cellCategories}}">
                                    <tr class="opportunityItem">
                                        <td>Opportunity Item ScoreInfo: {{cell.tdsFieldName}}</td>
                                        <td>{{cell.tdsExpectedValue}}</td>
                                        <td>{{cell.tdsFieldNameValue}}</td>
                                        <td>{{cell.fieldCheckType | status}}</td>
                                        <td>{{cell.fieldCheckType | explanation}}</td>
                                    </tr>
                                </template>
                                <template bind="{{si.scoreRationaleCategory as sr}}">
                                    <template repeat="{{cell in sr.cellCategories}}">
                                    <tr class="opportunityItem">
                                        <td>Opportunity Item ScoreInfo ScoreRational: {{cell.tdsFieldName}}</td>
                                        <td>{{cell.tdsExpectedValue}}</td>
                                        <td>{{cell.tdsFieldNameValue}}</td>
                                        <td>{{cell.fieldCheckType | status}}</td>
                                        <td>{{cell.fieldCheckType | explanation}}</td>
                                    </tr>
                                    </template>
                                </template>
                            </template>
                        </template>
                    </template>
                </template>
            </template>

            </tbody>
        </table>
    </template>
    <script>
        Polymer("report-opportunity", irp);
    </script>
</polymer-element>