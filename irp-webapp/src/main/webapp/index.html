<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Implementation Readiness Package</title>

    <style>
        #logo {
            padding-bottom: 5px;
            margin-right: 10px;
        }

        small {
            font-size: xx-small;
        }

        .version {
            font-size: .5em;
        }

        .uploader {
            margin-left: 25px;
            margin-bottom: 5px;
        }

        #instructions li {
            margin-bottom: 5px;
        }

        .vendorName {
            margin-bottom: 10px;
        }

        #vendor-name-info {
            border-bottom: black dotted 1px;
            text-decoration: none;
            cursor: help;
            font-family: serif;
        }

        .vendor-tooltip {
            display: inline-block;
        }

        .vendor-tooltip:hover .vendor-tooltip-inner {
            display: block;
        }

        .vendor-tooltip-inner {
            display: none; /* NEW */
            background: lightyellow;
            margin-left: 28px;
            padding: 10px;
            position: absolute;
            z-index: 1000;
            width: 250px;
            height: 100px;
            border: 1px black solid;
        }
    </style>

    <script src="deps/webcomponentsjs/webcomponents-lite.min.js"></script>

    <link rel="stylesheet" href="styles/main.css">

    <link rel="import" type="css" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="import" href="deps/iron-flex-layout/iron-flex-layout.html">

    <link rel="import" href="elements/elements.html">
    <link rel="import" href="irp-version.html">
    <style is="custom-style" include="shared-styles"></style>
</head>
<body unresolved>
    <span id="browser-sync-binding"></span>
    <template is="dom-bind" id="app">

        <paper-drawer-panel id="paperDrawerPanel">
            <!-- Drawer Scroll Header Panel -->
            <paper-scroll-header-panel drawer fixed>

                <!-- Drawer Toolbar -->
                <paper-toolbar id="drawerToolbar">
                    <span class="menu-name">Menu</span>
                </paper-toolbar>

                <!-- Drawer Content -->
                <paper-menu attr-for-selected="data-route" selected="[[route]]">
                    <a data-route="home" href="[[baseUrl]]">
                        <iron-icon icon="home"></iron-icon>
                        <span>Home</span>
                    </a>

                    <template is="dom-repeat" items="{{responses.individualResponses}}" as="response"
                              id="tmplIndividualResponses">
                        <a data-route$="[[computeRoute(index)]]" href="[[computeResponseUrl(index)]]">
                            <iron-icon icon$="{{computeResponseIcon(response)}}"></iron-icon>
                            <span>[[response.fileName]]</span>
                        </a>
                    </template>

                </paper-menu>

            </paper-scroll-header-panel>

            <!-- Main Area -->
            <paper-scroll-header-panel main id="headerPanelMain" condenses keep-condensed-header>

                <!-- Main Toolbar -->
                <paper-toolbar id="mainToolbar" class="tall">
                    <paper-icon-button id="paperToggle" icon="menu" paper-drawer-toggle></paper-icon-button>

                    <span class="space"></span>

                    <div class="middle middle-container">
                        <div class="app-name">
                            <img id="logo" src="SmarterBalancedLogo.PNG" alt="Smarter Balanced" align="left">
                            <span>Implementation Readiness Package</span><br />
                            <span class="version">version: <irp-version></irp-version></span><br />
                            <div style="white-space:nowrap;margin-top:20px;">[[response.fileName]]</div>
                        </div>
                    </div>

                    <div class="bottom bottom-container">
                        <div class="bottom-title"></div>
                    </div>
                </paper-toolbar>

                <!-- Main Content -->
                <div class="content">

                    <iron-pages attr-for-selected="data-route" selected="{{route}}">
                        <section data-route="home">
                            <paper-material elevation="1">
                                <div>
                                    <iron-pages id="pageModeSelection" selected="0">
                                        <div>
                                            <div>Select a mode to run IRP:</div>
                                            <ul>
                                                <li><button id="btnManualMode" class="btn">Manual Mode</button> - Select this if you are not running the Smarter Balanced Open Source System</li>
                                                <li><button id="btnAutomatedMode" class="btn">Automated Mode</button> - Select this if you are running the Smarter Balanced Open Source System</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <ul id="instructions">
                                                <li>Step 1: <a href="irp-package.zip" title="IRP Package Download">Download the
                                                    IRP package</a> and read the Implementation Readiness Package Usage Guide
                                                    (PDF).
                                                </li>
                                                <li>Step 2: Load data from the IRP package into your system and take tests as
                                                    instructed in the Usage Guide (PDF).
                                                </li>
                                                <li>Step 3: Upload the TDSReport XML file(s) for each result to IRP. Only a single
                                                    XML or ZIP containing multiple XML documents are accepted.
                                                </li>
                                                <li>Step 4: After the TDSReport XML file(s) have been analyzed, use the menu on the left
                                                    to see the results for each individual TDSReport XML submitted.
                                                </li>
                                            </ul>

                                            <div class="uploader">
                                                <form id="fileUploader" is="ajax-form" method="post"
                                                      enctype="multipart/form-data" action="/upload">
                                                    <div class="vendorName">Vendor Name: <input id="clientName" type="text"
                                                                                                name="name" required="">
                                                        <div class="vendor-tooltip"><span id="vendor-name-info">info</span><span
                                                                class="vendor-tooltip-inner">Please enter the name of the organization you represent. This information is displayed in the resulting PDF.</span>
                                                        </div>
                                                    </div>
                                                    <div>TDSReport XML File(s): <input type="file" class="btn btn-default"
                                                                                       name="file" required=""></div>
                                                    <button id="btnFileUpload" class="btn btn-primary">Upload</button>
                                                    <paper-spinner id="spinnerUpload" class="blue" inactive=""></paper-spinner>
                                                </form>
                                            </div>

                                            <template is="dom-if" if="[[responsesExist(responses)]]">
                                                <report-summary id="reportSummary" responses="[[responses]]"></report-summary>
                                            </template>
                                        </div>
                                        <div>
                                            <p>
                                                IRP Automation Mode will:
                                                <ol>
                                                    <li>Load your Smarter Balanced Open Source Assessment Delivery System implementation with IRP Test Packages and Students.</li>
                                                    <li>Simulate a Test Session where a Proctor initiates the Session and Students take the IRP Tests.</li>
                                                </ol>
                                            </p>
                                            <p>
                                                In order for IRP to Automate this process, it needs information about your Smarter Balanced Open Source Test Assessment Delivery System.
                                            </p>
                                            <p>
                                                Prior to using this feature, you will need to create one to four accounts in your system. You can either create one account
                                                that acts as an component administrator and a Proctor OR create distinct accounts to access each component. This is necessary
                                                so IRP can login into the following components:
                                                <ol>
                                                    <li>Program Management: Obtains the Tenant ID</li>
                                                    <li>Test Spec Bank: Uploads (side-loads) IRP Test Packages</li>
                                                    <li>Administration and Registration Tools: Schedules IRP Tests and creates IRP Students</li>
                                                    <li>Proctor Application: Initiates and approves Tests Sessions</li>
                                                    <li>Student Application: Takes IRP Tests</li>
                                                </ol>
                                            </p>
                                            <form id="formAutomate" is="iron-form" method="post" action="/automate" content-type="application/json">
                                                <paper-input name="vendorName" label="Vendor Name" required auto-validate error-message="Used for the IRP report"></paper-input>
                                                <paper-input name="oAuthUrl" label="OpenAM OAuth2 server URL (e.g. https://your.openam.url/auth/oauth2/access_token?realm=/your-realm)" required auto-validate error-message="Used to obtain access tokens from your system"></paper-input>
                                                <paper-input name="programManagementUrl" label="Program Management URL" required auto-validate error-message="Used to obtain "></paper-input>
                                                <paper-input name="programManagementClientId" label="Program Management Client ID" required auto-validate error-message="Used for logging into Program Management"></paper-input>
                                                <paper-input name="programManagementClientSecret" label="Program Management Client Secret" type="password"></paper-input>
                                                <paper-input name="programManagementUserId" label="Program Management User ID" required auto-validate error-message="Used for logging into Program Management"></paper-input>
                                                <paper-input name="programManagementUserPassword" label="Program Management User Password" type="password"></paper-input>
                                                <paper-input name="tenantName" label="Tenant Name Used in Your TDS Implementation" required auto-validate error-message="Used to create Test Packages to load into your TDS implementation"></paper-input>
                                                <paper-input name="stateAbbreviation" label="State Abbreviation" char-counter maxlength="2" required auto-validate allowed-pattern="[a-zA-Z]"></paper-input>
                                                <paper-input name="district" label="District to associate with IRP Students" required auto-validated error-message="Needed to associate to IRP Students"></paper-input>
                                                <paper-input name="institution" label="Institution to associate with IRP Students" required auto-validated error-message="Needed to associate to IRP Students"></paper-input>
                                                <button id="btnBeginAutomation" disabled>Begin</button>
                                                <button id="btnResetAutomationForm">Reset</button>
                                            </form>
                                        </div>
                                    </iron-pages>
                                </div>
                            </paper-material>
                        </section>

                        <section data-route="report">
                            <report-analysis id="frame" response="{{response}}"></report-analysis>
                        </section>
                    </iron-pages>

                </div>

            </paper-scroll-header-panel>

        </paper-drawer-panel>

    </template>

    <script src="scripts/app.js"></script>
</body>
</html>
